<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <!-- OPTIMIZACIONES M√ìVILES -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <meta name="HandheldFriendly" content="true">
    
    <!-- SEGURIDAD Y BLOQUEADOR DE ANUNCIOS -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://la12hd.com https://la14hd.com https://code.jquery.com https://cdnjs.cloudflare.com; script-src 'self' 'unsafe-inline' https://code.jquery.com https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; frame-src https://la12hd.com https://la14hd.com; connect-src 'self' https://la12hd.com https://la14hd.com;">
    <meta name="referrer" content="no-referrer">
    
    <title>TodoBalon - Canales Deportivos Sin Anuncios</title>
    <meta name="description"
        content="Pagina solo con fines Educativos">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="">
    <meta name="author" content="Dsport Libre">
    <link rel="icon" type="image" href="">
    <meta property="og:locale" content="es">
    <meta property="og:type" content="website">
    <meta property="og:title" content="DirecTV En vivo Fines educativos | Futbol con fines educativos">
    <meta property="og:description"
        content="Futchbol">
    <meta property="og:url" content="">
    <meta property="og:site_name" content="Dsport Libre">
    <meta property="og:image" content="">
    <link rel="stylesheet" href="canal.css">
    
    <!-- VERIFICACI√ìN DE AUTENTICACI√ìN SIMPLE -->
    <script>
        // Verificar autenticaci√≥n al cargar la p√°gina
        window.addEventListener('DOMContentLoaded', function() {
            const session = localStorage.getItem('todobalon_session');
            if (!session) {
                window.location.href = 'auth-simple.html';
                return;
            }
            
            try {
                const data = JSON.parse(session);
                if (data.expires <= new Date().getTime()) {
                    localStorage.removeItem('todobalon_session');
                    window.location.href = 'auth-simple.html';
                    return;
                }
                
                // Si es admin, mostrar controles de admin
                if (data.type === 'admin') {
                    console.log('üëë Sesi√≥n de administrador detectada');
                    window.isAdmin = true;
                    document.getElementById('adminControls').style.display = 'flex';
                }
            } catch(e) {
                localStorage.removeItem('todobalon_session');
                window.location.href = 'auth-simple.html';
            }
        });
        
        // Funciones de admin
        function logout() {
            localStorage.removeItem('todobalon_session');
            window.location.href = 'auth-simple.html';
        }
        
        function showAdminPanel() {
            const code = generateAccessCode();
            const modal = `
                <div id="adminModal" style="
                    position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
                    background: rgba(0,0,0,0.8); z-index: 10000;
                    display: flex; justify-content: center; align-items: center;
                ">
                    <div style="
                        background: linear-gradient(145deg, rgba(20, 20, 20, 0.95), rgba(30, 30, 30, 0.9));
                        border-radius: 20px; padding: 40px; max-width: 400px; width: 90%;
                        border: 1px solid rgba(100, 100, 150, 0.3);
                        text-align: center; color: white;
                    ">
                        <h2 style="color: #fff; margin-bottom: 20px;">üëë Panel Administrador</h2>
                        <p style="color: rgba(255,255,255,0.7); margin-bottom: 20px;">Nuevo c√≥digo generado:</p>
                        <div style="
                            background: rgba(0,255,0,0.1); border: 2px solid rgba(0,255,0,0.3);
                            padding: 20px; border-radius: 10px; margin: 20px 0;
                            font-size: 24px; font-weight: bold; letter-spacing: 3px;
                            color: #00ff88;
                        ">${code}</div>
                        <p style="color: rgba(255,255,255,0.6); font-size: 14px; margin-bottom: 20px;">
                            Comparte este c√≥digo con usuarios autorizados
                        </p>
                        <button onclick="copyToClipboard('${code}')" style="
                            background: linear-gradient(135deg, #667eea, #764ba2);
                            color: white; border: none; padding: 12px 24px;
                            border-radius: 8px; margin-right: 10px; cursor: pointer;
                        ">üìã Copiar</button>
                        <button onclick="closeModal()" style="
                            background: #dc3545; color: white; border: none; 
                            padding: 12px 24px; border-radius: 8px; cursor: pointer;
                        ">‚ùå Cerrar</button>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modal);
        }
        
        function generateAccessCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = 'TB';
            for(let i = 0; i < 6; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            // Agregar a c√≥digos v√°lidos (solo en memoria, no persistente por ahora)
            if (!window.generatedCodes) window.generatedCodes = [];
            window.generatedCodes.push(code);
            
            return code;
        }
        
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('¬°C√≥digo copiado al portapapeles!');
            });
        }
        
        function closeModal() {
            const modal = document.getElementById('adminModal');
            if (modal) modal.remove();
        }
    </script>
    
    <style>
        .admin-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .admin-btn, .logout-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .admin-btn {
            background: linear-gradient(135deg, #9f4f96, #764ba2);
            color: white;
        }
        
        .admin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(159, 79, 150, 0.4);
        }
        
        .logout-btn {
            background: rgba(220, 53, 69, 0.8);
            color: white;
        }
        
        .logout-btn:hover {
            background: rgba(220, 53, 69, 1);
            transform: translateY(-2px);
        }
    </style>

    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BroadcastEvent",
      "name": "Dsports en vivo",
      "isLiveBroadcast": true,
      "broadcaster": {
        "@type": "Organization",
        "name": "F√∫tbollibre"
      }
    }
  </script>

    <!-- JQUERY-->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" defer></script>
    <!-- LUXON -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/luxon/3.4.4/luxon.min.js" defer></script>
    <!-- CUSTOM JS-->
    <script src="canal.js?v=1.2" defer></script>
    <!-- AUTH JS -->
    <script src="auth.js" defer></script>
    
    <!-- SCRIPT PARA FORZAR AUTOPLAY INMEDIATO -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const iframe = document.getElementById('embedIframe');
            
            // Forzar interacci√≥n inmediata
            function forceInteraction() {
                if (iframe) {
                    // Simular m√∫ltiples eventos
                    ['click', 'mousedown', 'touchstart'].forEach(eventType => {
                        const event = new Event(eventType, { bubbles: true, cancelable: true });
                        iframe.dispatchEvent(event);
                    });
                    
                    // Hacer click real en el iframe
                    iframe.click();
                    
                    console.log('üé¨ Forzando autoplay inmediato');
                }
            }
            
            // Ejecutar inmediatamente y despu√©s de intervalos
            forceInteraction();
            setTimeout(forceInteraction, 1000);
            setTimeout(forceInteraction, 3000);
            setTimeout(forceInteraction, 5000);
            
            // Listener para cuando se carga el iframe
            iframe.addEventListener('load', function() {
                setTimeout(forceInteraction, 500);
                setTimeout(forceInteraction, 2000);
            });
        });
    </script>
</head>

<body>
    <header>
        <a href="/" class="title-header">TodoBalon</a>
        <div class="admin-controls" id="adminControls" style="display: none;">
            <button onclick="showAdminPanel()" class="admin-btn">
                üëë Panel Admin
            </button>
            <button onclick="logout()" class="logout-btn">
                üö™ Salir
            </button>
        </div>
        <div class="prelogo">
            <a href="/" class="logodef">
                <img src="" alt="" class="">
            </a>
        </div>
    </header>

    <main class="main-frame">
        <div class="centerfull">
            <h1 class="title">Canales en vivo</h1>
        </div>

        <!-- Layout de dos columnas: Reproductor + Canales -->
        <div class="content-layout">
            <!-- Reproductor de Video (Columna Principal) -->
            <div class="video-section">
                <div class="subiframe">
                    <div class="preframe">
                        <iframe allowfullscreen="true" 
                            scrolling="no" 
                            src="https://la12hd.com/vivo/canal.php?stream=dsports&autoplay=1&preload=auto&muted=0"
                            allow="autoplay *; encrypted-media *; fullscreen *; picture-in-picture *; accelerometer *; gyroscope *" 
                            width="100%" 
                            height="100%" 
                            frameborder="0" 
                            id="embedIframe" 
                            loading="eager"
                            sandbox="allow-scripts allow-same-origin allow-presentation allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-top-navigation"
                            referrerpolicy="no-referrer"
                            autoplay="true"
                            onload="this.click(); setTimeout(() => this.click(), 1000); setTimeout(() => this.click(), 3000);">
                        </iframe>
                    </div>
                    <div class="video-controls">
                        <div class="current-channel">
                            <span id="currentChannelName">üì∫ DirecTV Sports</span>
                        </div>
                        <div class="control-buttons">
                            <button id="btnIframe">
                                üîÑ Recargar
                            </button>
                            <button id="btnAdBlocker" class="ad-blocker-btn">
                                üõ°Ô∏è Bloqueador ON
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Panel de Canales (Columna Lateral) -->
            <div class="channels-section">
                <div class="channels-header">
                    <h3>‚öΩ Seleccionar Canal</h3>
                    <div class="channel-search">
                        <input type="text" id="channelSearch" placeholder="üîç Buscar canal...">
                    </div>
                </div>
                
                <div class="channels-grid">
                    <!-- Canal 1: DirecTV Sports -->
                    <button class="channel-card active" data-canal="dsports" data-url="https://la12hd.com/vivo/canal.php?stream=dsports">
                        <div class="channel-number">1</div>
                        <div class="channel-info">
                            <div class="channel-name">DirecTV Sports</div>
                            <div class="channel-category">üì∫ Sports</div>
                        </div>
                        <div class="channel-status">üü¢</div>
                    </button>

                    <!-- Canal 2: DirecTV Sports 2 -->
                    <button class="channel-card" data-canal="dsports2" data-url="https://la14hd.com/vivo/canal.php?stream=dsports2">
                        <div class="channel-number">2</div>
                        <div class="channel-info">
                            <div class="channel-name">DirecTV Sports 2</div>
                            <div class="channel-category">üì∫ Sports</div>
                        </div>
                        <div class="channel-status">üü¢</div>
                    </button>

                    <!-- Canal 3: DirecTV Sports+ -->
                    <button class="channel-card" data-canal="dsportsplus" data-url="https://la14hd.com/vivo/canal.php?stream=dsportsplus">
                        <div class="channel-number">3</div>
                        <div class="channel-info">
                            <div class="channel-name">DirecTV Sports+</div>
                            <div class="channel-category">üì∫ Sports</div>
                        </div>
                        <div class="channel-status">üü¢</div>
                    </button>

                    <!-- Canal 4: Liga1 Max -->
                    <button class="channel-card" data-canal="liga1max" data-url="https://la14hd.com/vivo/canal.php?stream=liga1max">
                        <div class="channel-number">4</div>
                        <div class="channel-info">
                            <div class="channel-name">Liga1 Max</div>
                            <div class="channel-category">üì∫ Liga</div>
                        </div>
                        <div class="channel-status">üü¢</div>
                    </button>

                    <!-- Canal 5: ESPN -->
                    <button class="channel-card" data-canal="espn" data-url="https://la14hd.com/vivo/canal.php?stream=espn">
                        <div class="channel-number">5</div>
                        <div class="channel-info">
                            <div class="channel-name">ESPN</div>
                            <div class="channel-category">üèÜ ESPN</div>
                        </div>
                        <div class="channel-status">üü¢</div>
                    </button>

                    <!-- Canal 6: ESPN 2 -->
                    <button class="channel-card" data-canal="espn2" data-url="https://la14hd.com/vivo/canal.php?stream=espn2">
                        <div class="channel-number">6</div>
                        <div class="channel-info">
                            <div class="channel-name">ESPN 2</div>
                            <div class="channel-category">üèÜ ESPN</div>
                        </div>
                        <div class="channel-status">üü¢</div>
                    </button>

                    <!-- Canal 7: ESPN 3 -->
                    <button class="channel-card" data-canal="espn3" data-url="https://la14hd.com/vivo/canal.php?stream=espn3">
                        <div class="channel-number">7</div>
                        <div class="channel-info">
                            <div class="channel-name">ESPN 3</div>
                            <div class="channel-category">üèÜ ESPN</div>
                        </div>
                        <div class="channel-status">üü¢</div>
                    </button>

                    <!-- Canal 8: ESPN 4 -->
                    <button class="channel-card" data-canal="espn4" data-url="https://la14hd.com/vivo/canal.php?stream=espn4">
                        <div class="channel-number">8</div>
                        <div class="channel-info">
                            <div class="channel-name">ESPN 4</div>
                            <div class="channel-category">üèÜ ESPN</div>
                        </div>
                        <div class="channel-status">üü¢</div>
                    </button>

                    <!-- Canal 9: ESPN 5 -->
                    <button class="channel-card" data-canal="espn5" data-url="https://la14hd.com/vivo/canal.php?stream=espn5">
                        <div class="channel-number">9</div>
                        <div class="channel-info">
                            <div class="channel-name">ESPN 5</div>
                            <div class="channel-category">üèÜ ESPN</div>
                        </div>
                        <div class="channel-status">üü¢</div>
                    </button>

                    <!-- Canal 10: ESPN 6 -->
                    <button class="channel-card" data-canal="espn6" data-url="https://la14hd.com/vivo/canal.php?stream=espn6">
                        <div class="channel-number">10</div>
                        <div class="channel-info">
                            <div class="channel-name">ESPN 6</div>
                            <div class="channel-category">üèÜ ESPN</div>
                        </div>
                        <div class="channel-status">üü¢</div>
                    </button>

                    <!-- Canal 11: ESPN 7 -->
                    <button class="channel-card" data-canal="espn7" data-url="https://la14hd.com/vivo/canal.php?stream=espn7">
                        <div class="channel-number">11</div>
                        <div class="channel-info">
                            <div class="channel-name">ESPN 7</div>
                            <div class="channel-category">üèÜ ESPN</div>
                        </div>
                        <div class="channel-status">üü¢</div>
                    </button>

                    <!-- Canal 12: ESPN Premium -->
                    <button class="channel-card" data-canal="espnpremium" data-url="https://la14hd.com/vivo/canales.php?stream=espnpremium">
                        <div class="channel-number">12</div>
                        <div class="channel-info">
                            <div class="channel-name">ESPN Premium</div>
                            <div class="channel-category">üèÜ ESPN</div>
                        </div>
                        <div class="channel-status">üü¢</div>
                    </button>

                    <!-- Canal 13: TyC Sports -->
                    <button class="channel-card" data-canal="tycsports" data-url="https://la14hd.com/vivo/canales.php?stream=tycsports">
                        <div class="channel-number">13</div>
                        <div class="channel-info">
                            <div class="channel-name">TyC Sports</div>
                            <div class="channel-category">‚≠ê Premium</div>
                        </div>
                        <div class="channel-status">üü¢</div>
                    </button>

                    <!-- Canal 14: TNT Sports -->
                    <button class="channel-card" data-canal="tntsports" data-url="https://la14hd.com/vivo/canales.php?stream=tntsports">
                        <div class="channel-number">14</div>
                        <div class="channel-info">
                            <div class="channel-name">TNT Sports</div>
                            <div class="channel-category">‚≠ê Premium</div>
                        </div>
                        <div class="channel-status">üü¢</div>
                    </button>
                </div>
            </div>
        </div>
    </main>

   
</body>

</html>